\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{math}[6666/66/66 Common math needs.]

\RequirePackage{amsmath, amssymb, amsfonts, amsthm, mathtools}

% Math environments.
\newtheorem{defn}{Definition}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{example}{Example}[section]
\newtheorem{exercise}{Exercise}[section]
\newenvironment{solution}
  { \let\oldqedsymbol\qedsymbol%
    \renewcommand{\qedsymbol}{$\blacktriangleleft$}%
    \begin{proof}[Solution]
  }
  { \end{proof}%
    \renewcommand{\qedsymbol}{\oldqedsymbol}%
  }

% Redefine \left and \right to remove the surrounding extra space.
\let\ogleft\left
\let\ogright\right
\def\left{\mathopen{}\mathclose\bgroup\ogleft}
\def\right{\aftergroup\egroup\ogright}

% Autosized delimeters.
\DeclarePairedDelimiter{\s}{\{}{\}}
\DeclarePairedDelimiter{\p}{(}{)}
\DeclarePairedDelimiter{\br}{[}{]}

% Commands for common number sets.
\def\C{\mathbb{C}}
\def\N{\mathbb{N}}
\def\Q{\mathbb{Q}}
\def\R{\mathbb{R}}
\def\Z{\mathbb{Z}}
\def\ind{\mathbf{1}}

% Differentials
\def\d{\mathrm{d}}

% Probability stuff.
\newcommand{\E}{\mathbb{E}\br}
\renewcommand{\P}{\mathbb{P}\p}
\newcommand{\cov}{\operatorname{Cov}\br}
\newcommand{\var}{\operatorname{Var}\br}
\newcommand{\id}{\operatorname{id}}
\newcommand{\iid}{i.i.d.}

\makeatletter
\newcommand{\given}{\,\@ifstar{\middle|}{\mid}\,}
\makeatother

% Other common functions.
\newcommand{\argmin}{\operatorname*{arg\,min}}
\newcommand{\argmax}{\operatorname*{arg\,max}}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\abs}[1]{\left\lvert#1\right\rvert}
